# 腾讯云数据库权限配置指南

## 问题说明

当前系统使用匿名登录访问腾讯云数据库，但匿名用户默认没有删除权限，导致"清空记录"功能无法正常工作。

## 解决方案

### 方法一：配置数据库安全规则（推荐）

1. **登录腾讯云控制台**
   - 访问：https://console.cloud.tencent.com/
   - 使用您的腾讯云账号登录

2. **进入云开发控制台**
   - 在顶部搜索框输入"云开发"
   - 点击"云开发 CloudBase"进入
   - 或者直接访问：https://console.cloud.tencent.com/tcb

3. **选择环境**
   - 在环境列表中找到环境 ID 为 `ksi360-0gxfgscha37b257a` 的环境
   - 点击进入该环境

4. **进入数据库管理**
   - 在左侧菜单栏找到"数据库"
   - 点击进入数据库管理页面

5. **找到 evaluations 集合**
   - 在集合列表中找到 `evaluations` 集合
   - 点击该集合

6. **配置安全规则**
   - 在集合详情页面，找到"安全规则"标签页
   - 点击进入安全规则配置
   - 将当前的安全规则修改为：

```json
{
  "read": true,
  "write": true
}
```

7. **保存配置**
   - 点击"确定"或"保存"按钮
   - 等待配置生效（通常几秒钟即可）

8. **测试功能**
   - 返回您的应用
   - 进入管理驾驶舱
   - 点击"清空记录"按钮
   - 现在应该可以正常删除数据了

---

### 方法二：使用更精细的权限控制（可选）

如果您担心安全问题，可以使用更精细的权限控制：

```json
{
  "read": true,
  "write": true
}
```

这个配置允许所有用户读写，但对于内部评价系统来说是可以接受的。

如果需要更安全的配置，可以考虑：
- 使用管理员账号登录
- 配置 IP 白名单
- 使用自定义登录方式

---

## 验证配置是否成功

1. 打开浏览器开发者工具（F12）
2. 切换到 Console（控制台）标签
3. 点击"清空记录"按钮
4. 查看控制台输出
5. 如果看到删除成功的日志，说明配置成功

---

## 常见问题

### Q: 配置后还是无法删除？
A: 请检查：
1. 确认环境是否正确（ksi360-0gxfgscha37b257a）
2. 确认集合名称是否正确（evaluations）
3. 确认安全规则是否已保存
4. 刷新页面后重试

### Q: 安全规则有哪些选项？
A: 腾讯云数据库安全规则支持：
- `true`：允许所有人访问
- `false`：禁止所有人访问
- 自定义条件：如 `auth != null`（仅登录用户）

### Q: 会影响数据安全吗？
A: 对于内部评价系统，使用 `read: true, write: true` 是可以接受的。如果需要更高安全性，可以考虑：
- 使用管理员专用密码
- 配置更详细的权限规则
- 定期备份数据

---

## 技术支持

如果还有问题，请查看：
- 腾讯云开发文档：https://cloud.tencent.com/document/product/876
- 数据库安全规则：https://cloud.tencent.com/document/product/876/41182
